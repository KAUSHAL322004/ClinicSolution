@page "/logout"
@using Microsoft.AspNetCore.Components.Authorization
@inject Blazored.LocalStorage.ILocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthStateProvider
@inject NavigationManager Nav

<h3> Logging out...</h3>

@code{
    protected override async Task OnInitializedAsync()
    {
        //remove token from storeage
        await LocalStorage.RemoveItemAsync("authToken");

        //notify auth provider
        var authProvider = (JwtAuthStateProvider)AuthStateProvider;
        authProvider.NotifyUserLogout();

        //redirect to login
        Nav.NavigateTo("/login");
    }
}